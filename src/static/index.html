<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/js/socket.io.js"></script>
</head>
<body>
    <form id="uploadForm">
        <input id="nickname" type="text">
        <textarea id="msg"></textarea>
        <input type="submit">
    </form>
    <script>
        const socket=io()
        const testJoin={
            id:1234567,
            token:"3213afadsf8307h"
        }
        testJoin.token=document.cookie.value
        testStr=JSON.stringify(testJoin)
        socket.emit('join',testStr)
        socket.on('post',postStr=>{
            console.log(postStr)
        })
        const uploadForm=document.getElementById('uploadForm')
        uploadForm.addEventListener('submit',then_event=>{
            then_event.preventDefault()
            const sendObj={
                id:1234567,
                content:"",
                nickname:""
            }
            sendObj.content=document.getElementById('msg').value
            sendObj.nickname=document.getElementById('nickname').value
            sendStr=JSON.stringify(sendObj)
            socket.emit('newPost',sendStr)
            document.getElementById('msg').value=""
        })
    </script>
</body>
</html>